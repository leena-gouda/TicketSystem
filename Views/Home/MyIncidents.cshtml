@model List<IncidentModel>


    <style>
    :root {
        --nude-bg: #fdf8f3;
        --nude-surface: #fff;
        --nude-accent: #d4b49e;
        --nude-accent-hover: #c6a086;
        --nude-text: #5a4a3f;
        --nude-muted: #a89b90;
        --nude-border: #e3d6cb;
        --nude-shadow: rgba(0, 0, 0, 0.06);
    }

    body {
        background-color: var(--nude-bg);
        font-family: 'Lora', serif;
        color: var(--nude-text);
        .theme-table th {
        background-color: var(--nude-accent); 
        color: #fff;
        font-weight: 600;
        padding: 12px 16px;
        border: 1px solid var(--nude-border);
    }

    .btn-nude {
        background-color: var(--nude-accent);
        color: #fff;
        padding: 0.6rem 1.2rem;
        border-radius: 0.375rem;
        font-size: 1rem;
        border: none;
        transition: background-color 0.3s ease, box-shadow 0.3s ease;
    }

        .btn-nude:hover {
            background-color: var(--btn-hover);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

    .btn-outline-nude {
        border: 2px solid var(--nude-primary);
        color: var(--nude-primary);
        background-color: transparent;
        padding: 0.6rem 1.2rem;
        border-radius: 0.375rem;
        transition: all 0.3s ease;
    }

        .btn-outline-nude:hover {
            background-color: var(--nude-light);
            box-shadow: inset 0 0 0 1000px rgba(212,180,158,0.05);
        }


    .theme-table td {
        background-color: var(--nude-surface); 
        color: var(--nude-text);
        border: 1px solid var(--nude-border);
    }

    .theme-table tbody tr:nth-child(odd) {
        background-color: var(--nude-bg); 
    }

    .theme-table tr:hover {
        background-color: var(--nude-accent-hover); 
        color: #fff;
        transition: background-color 0.3s ease;
    }

    .text-welcome {
        color: var(--nude-accent);
        font-weight: 500;
        letter-spacing: 0.5px;
    }
    }
    </style>
<h2 class="text-welcome"> My Incident History</h2>



<table class="table table-bordered table-hover text-center theme-table">
    <thead>
        <tr>
            <th><i class="fas fa-hashtag me-1"></i>Incident Id</th>
            <th><i class="fas fa-calendar-alt me-1"></i>Open Date</th>
            <th><i class="fas fa-user me-1"></i>Caller</th>
            <th><i class="fas fa-align-left me-1"></i>Short Description</th>
            <th><i class="fas fa-user-tag"></i>Assigned To</th>
            <th><i class="fas fa-info-circle me-1"></i>State</th>
            <th><i class="fas fa-clock"></i>Updated At</th>
        </tr>
    </thead>

    <tbody>
        @foreach (var incident in Model)
        {
            
            var assignedAdmin = incident.AssignedAdmin ?? ViewBag.user;
            <tr>
                <td>@incident.Id</td>
                <td>@incident.openDate</td>
                <td>@incident.caller.Login.Name</td>
                <td>@incident.Ticket.ShortDescription</td>
                <td>@(incident?.AssignedAdmin?.Login?.Name ?? "Unassigned")</td>
                <td>@incident.State </td>
                <td>@incident.UpdatedAt?.ToString("yyyy-MM-dd HH:mm")</td>
            </tr>
        }
    </tbody>
</table>
<div class="d-flex justify-content-center gap-3 mt-4 mb-5">
    <div class="text-center mt-4 mb-3">
        <a href="@Url.Action("ExportToExcel", "Home")" class="btn btn-nude rounded-pill px-4">
            <i class="fas fa-file-excel me-2"></i> Download as Excel
        </a>
    </div>

    <div class="text-center mt-4 mb-5">
        <a href="@Url.Action("Dashboard", "Home")" class="btn btn-nude rounded-pill px-4">
            <i class="fas fa-tachometer-alt me-2"></i> Go to Dashboard
        </a>
    </div>


</div>




